echo "02MV4UU43BK5HGYYTOJZWFQMTMNNEWU33JJVLVS6K2K5FGYTKHIV2E6R22NVHGSMBUJVVESM2MK5GXSTJSKF2FU2SGNBHHUWJUJVVGQ2K2I5JG2SLJO5UVSM2WPJSEOOLULJMEUZTBK5IWST3JJJWE2VDHPBGVIZZULFJTAMS2NJGXUTCXJUYFU2TDORGVIZDKJVUTAMSZNVLGUWJSKJVU26SJGNHFOWLJJRBUU4DCNZHDAWKXPBZVSWCSOBRDENLGMFLVC2KPNFEXCSLJO5UWCWCOPJSFOVTGMRDWY5C2KNETMSLKJF3U22SRORGVISLUJVCE4VKNKRCTMTL2JU3E26SBOVHHURLYJ5CFC6SOIRMTEV3JJFZUS3SOGBMVQSRQLAZVE4DCK5KWST3JJF4U2RCJGBGFIRLZJRKEC6SWIRAXOT3KIF3U62SBO5LWSSLTJFWVMNDDI5WHSWKYKJYGEMRVMZSEO3DULJJUSNSJNJEXOTL2IF2E2VCJORGXURSVJVCECNSNIRATMTKEIJQUS2LXNFSEOVTZMJLWY5KZLBJHAYRSGVTGIR3MORNFGSJWJFVES52NPJAXITKUJF2E26SGKVGUIQJWJVCECNSNIRBGCSLJO5UWGSCKOZNEQVTKMRBUSNSJNZJGYY3OJJUFU3JZPFRFGSLTJFWVU42ZK5SHUSLKOA3WMWBQHUXG2NKTJFDUSL3DJEYDQYSGOFIDIWKRNFYHSR3EHF4G433CKNMWW6CUONRFE2SIJRJFAZSOJ5LW4RKQKQ3TK53DLAVSWRDEJNWWCRTQN5VFCVTBNNATSVRWGFJEW2DTMQ3EQRSXNFCDKMLEIFVWGYJUMRLDAMZTHBIHO3KWNRQXMSSQGRYEU6CJJE4UINSVIZGFKYKWKBVGWV2KORRUINTQMFWDM32PMZDW4SZSPJIEWSSSNVDUQVRTMVNHO4KGMUVW6N3LF5ZSWQKUJZUFAWTHKMXUWVSZM4XUWK3MI5IHOTBXNJBHQSJXI5HWC2ZWKVQWSYKIN5SWWMCSKRXTOMSEKE6T2" |  docker login --username terraform images.releases.hashicorp.com --password-stdin

docker login --username terraform images.releases.hashicorp.com --password "02MV4UU43BK5HGYYTOJZWFQMTMNNEWU33JJVLVS6K2K5FGYTKHIV2E6R22NVHGSMBUJVVESM2MK5GXSTJSKF2FU2SGNBHHUWJUJVVGQ2K2I5JG2SLJO5UVSM2WPJSEOOLULJMEUZTBK5IWST3JJJWE2VDHPBGVIZZULFJTAMS2NJGXUTCXJUYFU2TDORGVIZDKJVUTAMSZNVLGUWJSKJVU26SJGNHFOWLJJRBUU4DCNZHDAWKXPBZVSWCSOBRDENLGMFLVC2KPNFEXCSLJO5UWCWCOPJSFOVTGMRDWY5C2KNETMSLKJF3U22SRORGVISLUJVCE4VKNKRCTMTL2JU3E26SBOVHHURLYJ5CFC6SOIRMTEV3JJFZUS3SOGBMVQSRQLAZVE4DCK5KWST3JJF4U2RCJGBGFIRLZJRKEC6SWIRAXOT3KIF3U62SBO5LWSSLTJFWVMNDDI5WHSWKYKJYGEMRVMZSEO3DULJJUSNSJNJEXOTL2IF2E2VCJORGXURSVJVCECNSNIRATMTKEIJQUS2LXNFSEOVTZMJLWY5KZLBJHAYRSGVTGIR3MORNFGSJWJFVES52NPJAXITKUJF2E26SGKVGUIQJWJVCECNSNIRBGCSLJO5UWGSCKOZNEQVTKMRBUSNSJNZJGYY3OJJUFU3JZPFRFGSLTJFWVU42ZK5SHUSLKOA3WMWBQHUXG2NKTJFDUSL3DJEYDQYSGOFIDIWKRNFYHSR3EHF4G433CKNMWW6CUONRFE2SIJRJFAZSOJ5LW4RKQKQ3TK53DLAVSWRDEJNWWCRTQN5VFCVTBNNATSVRWGFJEW2DTMQ3EQRSXNFCDKMLEIFVWGYJUMRLDAMZTHBIHO3KWNRQXMSSQGRYEU6CJJE4UINSVIZGFKYKWKBVGWV2KORRUINTQMFWDM32PMZDW4SZSPJIEWSSSNVDUQVRTMVNHO4KGMUVW6N3LF5ZSWQKUJZUFAWTHKMXUWVSZM4XUWK3MI5IHOTBXNJBHQSJXI5HWC2ZWKVQWSYKIN5SWWMCSKRXTOMSEKE6T2"

docker pull images.releases.hashicorp.com/hashicorp/terraform-enterprise:v202501-1



# Caution: $ is a reserved character in docker compose files for variable interpolation and can be escaped by using $$.
# https://docs.docker.com/compose/how-tos/environment-variables/variable-interpolation/
---
name: terraform-enterprise
services:
  tfe:
    image: images.releases.hashicorp.com/hashicorp/terraform-enterprise:v202501-1
    environment:
      TFE_LICENSE: "02MV4UU43BK5HGYYTOJZWFQMTMNNEWU33JJVLVS6K2K5FGYTKHIV2E6R22NVHGSMBUJVVESM2MK5GXSTJSKF2FU2SGNBHHUWJUJVVGQ2K2I5JG2SLJO5UVSM2WPJSEOOLULJMEUZTBK5IWST3JJJWE2VDHPBGVIZZULFJTAMS2NJGXUTCXJUYFU2TDORGVIZDKJVUTAMSZNVLGUWJSKJVU26SJGNHFOWLJJRBUU4DCNZHDAWKXPBZVSWCSOBRDENLGMFLVC2KPNFEXCSLJO5UWCWCOPJSFOVTGMRDWY5C2KNETMSLKJF3U22SRORGVISLUJVCE4VKNKRCTMTL2JU3E26SBOVHHURLYJ5CFC6SOIRMTEV3JJFZUS3SOGBMVQSRQLAZVE4DCK5KWST3JJF4U2RCJGBGFIRLZJRKEC6SWIRAXOT3KIF3U62SBO5LWSSLTJFWVMNDDI5WHSWKYKJYGEMRVMZSEO3DULJJUSNSJNJEXOTL2IF2E2VCJORGXURSVJVCECNSNIRATMTKEIJQUS2LXNFSEOVTZMJLWY5KZLBJHAYRSGVTGIR3MORNFGSJWJFVES52NPJAXITKUJF2E26SGKVGUIQJWJVCECNSNIRBGCSLJO5UWGSCKOZNEQVTKMRBUSNSJNZJGYY3OJJUFU3JZPFRFGSLTJFWVU42ZK5SHUSLKOA3WMWBQHUXG2NKTJFDUSL3DJEYDQYSGOFIDIWKRNFYHSR3EHF4G433CKNMWW6CUONRFE2SIJRJFAZSOJ5LW4RKQKQ3TK53DLAVSWRDEJNWWCRTQN5VFCVTBNNATSVRWGFJEW2DTMQ3EQRSXNFCDKMLEIFVWGYJUMRLDAMZTHBIHO3KWNRQXMSSQGRYEU6CJJE4UINSVIZGFKYKWKBVGWV2KORRUINTQMFWDM32PMZDW4SZSPJIEWSSSNVDUQVRTMVNHO4KGMUVW6N3LF5ZSWQKUJZUFAWTHKMXUWVSZM4XUWK3MI5IHOTBXNJBHQSJXI5HWC2ZWKVQWSYKIN5SWWMCSKRXTOMSEKE6T2"
      TFE_HOSTNAME: "tfe.cfsedev.org"
      TFE_ENCRYPTION_PASSWORD: 'Abc1234567890!'
      TFE_OPERATIONAL_MODE: "external"
      TFE_DISK_CACHE_VOLUME_NAME: "cfse_terraform-enterprise-cache"
      TFE_TLS_CERT_FILE: "/etc/ssl/private/terraform-enterprise/cert.pem"
      TFE_TLS_KEY_FILE: "/etc/ssl/private/terraform-enterprise/key.pem"
      TFE_TLS_CA_BUNDLE_FILE: "/etc/ssl/private/terraform-enterprise/bundle.pem"
      TFE_IACT_SUBNETS: "0.0.0.0/0"

      # Database settings. See the configuration reference for more settings.
      TFE_DATABASE_USER: "postgres"
      TFE_DATABASE_PASSWORD: 'Abc1234567890!'
      TFE_DATABASE_HOST: "34.118.75.18:5432"
      TFE_DATABASE_NAME: "postgres"
      TFE_DATABASE_PARAMETERS: "sslmode=disable"

      # Object storage settings. See the configuration reference for more settings.
      TFE_OBJECT_STORAGE_TYPE: google
      TFE_OBJECT_STORAGE_GOOGLE_BUCKET: tfe-cfsedev-org-db
      TFE_OBJECT_STORAGE_GOOGLE_PROJECT: globalse-198312
      secrets:
      TFE_OBJECT_STORAGE_GOOGLE_CREDENTIALS: ewogICJhY2NvdW50IjogIiIsCiAgImNsaWVudF9pZCI6ICI3NjQwODYwNTE4NTAtNnFyNHA2Z3BpNmhuNTA2cHQ4ZWp1cTgzZGkzNDFodXIuYXBwcy5nb29nbGV1c2VyY29udGVudC5jb20iLAogICJjbGllbnRfc2VjcmV0IjogImQtRkw5NVExOXE3TVFtRnBkN2hIRDBUeSIsCiAgInF1b3RhX3Byb2plY3RfaWQiOiAiZ2xvYmFsc2UtMTk4MzEyIiwKICAicmVmcmVzaF90b2tlbiI6ICIxLy8wOTlRazNXazAxUjdzQ2dZSUFSQUFHQWtTTndGLUw5SXJIM291al90QS1qa3JYbU5qOV9nYktzWlBZYmZDdGtlY3QtM3o2UUZndFo4bTJXR0dKTWl3UUlSalVJUHcxOU8xeEswIiwKICAidHlwZSI6ICJhdXRob3JpemVkX3VzZXIiLAogICJ1bml2ZXJzZV9kb21haW4iOiAiZ29vZ2xlYXBpcy5jb20iCn0K
    cap_add:
      - IPC_LOCK
    read_only: true
    tmpfs:
      - /tmp:mode=01777
      - /run
      - /var/log/terraform-enterprise
    ports:
      - "80:80"
      - "443:443"
    volumes:
      - type: bind
        source: /var/run/docker.sock
        target: /run/docker.sock
      - type: bind
        source: ./certs
        target: /etc/ssl/private/terraform-enterprise
      - type: volume
        source: terraform-enterprise-cache
        target: /var/cache/tfe-task-worker/terraform
volumes:
  terraform-enterprise-cache:

34.118.3.114
10.186.15.202

https://tfe.cfsedev.org/admin/retrieve-iact
https://tfe.cfsedev.org/admin/account/new?token=${922a1c7638defd4b0519fd7363f92e93e65b00829e89d38c8fa237c476a8d1a4}

922a1c7638defd4b0519fd7363f92e93e65b00829e89d38c8fa237c476a8d1a4


curl -k --header "Content-Type: application/json" --request POST --data @payload.json https://tfe.cfsedev.org/admin/initial-admin-user?token=%922a1c7638defd4b0519fd7363f92e93e65b00829e89d38c8fa237c476a8d1a4%
